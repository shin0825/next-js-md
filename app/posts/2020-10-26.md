---
title: CORSってなんやねんメモ
permalink: what-is-C-O-R-S
date: '2020-10-26'
category: 学習記録
tag:
- HTTP
---

## ある日

後輩から「Web APIを作ってローカル起動してみたがCORSでアクセスが許可されない」と質問を受けた。

HTTPについてはよく知らないが、聞きかじった知識を元に質問をした。

アクセス元は HTMLファイルで、アクセス先はローカルで起動したWeb APIだった。

後輩的には同じパソコン内なので許可される想定だったようだが、自分的にはオリジンが異なるのでは？と思った。

とりあえずこの時は、「アクセス元を適当なWebアプリにしてみて、アクセス先でオリジンを許容してみて」といい問題を解決した。

しかし、CORSに対する理解がかけていることを感じたので、今回はちょろちょろ調べていくことにした。

## オリジン？

https://developer.mozilla.org/ja/docs/Glossary/Origin

「プロトコル＋ホスト（ドメイン）＋ポート」のセットのこと。

「https:// ＋ s-nakamura-portfolio.com ＋ :3000」がオリジン。

## CORS？

オリジン間リソース共有のこと。

読み方はコルスとかシーオーアールエスだったり。

異なるオリジン間でアクセスを許可する仕組みのこと。

……あるWebサイトが、異なるオリジンからのリソースを取得を許可すること……かなたぶん。

リクエストのヘッダーに許可が書いてあったり、リクエストもとで許可するオリジン（ホワイトリスト）を指定すると、

異なるオリジンからの呼び出しに応じるようになる。らしい？

## CORSは何に効くの

- 自オリジン→異オリジンへの書き込みはOKらしい。

- 自オリジンが異オリジンを埋め込む、のもOKらしい。

- 自オリジン→異オリジンの読み込みは基本的にNGなんだけどできちゃうこともままあるらしい。

  - XMLHttpRequestは制限を受ける。

  - Javascript, CSS, img
  
  - iframeは許可されるが、 `X-Frame-Options`ヘッダーで制限できるらしい。
  
なので、制限を受けるものに許可をする際にCORSが登場するってわーーけ。


## ここまで書きかけです。

## 参考

- https://developer.mozilla.org/ja/docs/Web/Security/Same-origin_policy#Cross-origin_network_access

- 
